# M&F Digital · Комиссионные

Современный Next.js (App Router) фронтенд для учета комиссий агентства M&F Digital: проекты, автоматическое начисление процентов, заявки на вывод и панель бухгалтера.

## Стек
- Next.js 14 (App Router) + React 18 + TypeScript
- Tailwind CSS (кастомная черно-белая тема, градиенты, стекло)
- Zustand (стейт, транзакции, защита от двойного начисления)
- Heroicons (монохромные иконки)

## Основные возможности
- Роли: админ, менеджер, разработчик, бухгалтер (переключатель роли в топ-баре).
- Проекты: создание (админ), привязка менеджера/разработчиков, смена статуса на "оплачен" с автоматическим начислением комиссий по настройкам.
- Финансы: личный баланс, транзакции, заявки на вывод (менеджер/разработчик), подтверждение/отклонение бухгалтером, отмена заявки до одобрения.
- Аналитика: поступления по месяцам, топ менеджеров/разработчиков, отчет по выплатам.
- Настройки: проценты комиссий, просмотр пользователей.
- Дизайн: строгая черно-белая палитра, градиенты, стекло, анимации hover, адаптив.

## Локальный запуск
Node.js не обнаружен в окружении. Установите LTS (>=18), затем:
```bash
cd "mf-digital-commissions"
npm install
npm run dev
```
Откройте http://localhost:3000

## Безопасность и проверки
- Все начисления идут через транзакции в Zustand, проверка на повторное начисление при смене статуса.
- Переход статуса в "оплачен" создает кредиты менеджеру и каждому разработчику.
- Одобрение заявки создает дебет-транзакцию, отмена до одобрения доступна сотруднику.
- Все действия (проекты, выплаты) логируются в историях и транзакциях (можно расширить до бекенда с Postgres/JWT).

## Что дальше
- Подключить настоящий REST API (Nest/Fastify) с JWT/CSRF защитой и Postgres.
- Настроить аудит (например, pino + Loki/Splunk) и резервное копирование БД.
- Добавить email/web пуш-уведомления, экспорт в Excel/PDF, и e2e-тесты критических путей начисления/выплаты.


