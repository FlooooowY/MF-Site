<script setup lang="ts">
const activeFilter = ref('all')

const filters = [
	{ id: 'all', label: '–í—Å–µ' },
	{ id: 'ppf', label: 'PPF' },
	{ id: 'vinyl', label: '–í–∏–Ω–∏–ª' },
	{ id: 'tint', label: '–¢–æ–Ω–∏—Ä–æ–≤–∫–∞' },
	{ id: 'polish', label: '–ü–æ–ª–∏—Ä–æ–≤–∫–∞' },
	{ id: 'ceramic', label: '–ö–µ—Ä–∞–º–∏–∫–∞' },
]

const services = [
	{
		id: 'ppf',
		category: 'ppf',
		title: '–ó–∞—â–∏—Ç–Ω–∞—è –ø–ª–µ–Ω–∫–∞ PPF',
		icon: 'üõ°Ô∏è',
		price: '–æ—Ç 45 000 ‚ÇΩ',
		description: '–ù–µ–≤–∏–¥–∏–º–∞—è –∑–∞—â–∏—Ç–∞ –∫—É–∑–æ–≤–∞ –æ—Ç —Å–∫–æ–ª–æ–≤, —Ü–∞—Ä–∞–ø–∏–Ω –∏ —Ä–µ–∞–≥–µ–Ω—Ç–æ–≤',
		features: [
			'–ó–∞—â–∏—Ç–∞ –æ—Ç —Å–∫–æ–ª–æ–≤',
			'–ì–∏–¥—Ä–æ—Ñ–æ–±–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç',
			'–ì–∞—Ä–∞–Ω—Ç–∏—è 5 –ª–µ—Ç',
			'XPEL / SunTek',
		],
		image: '/images/services/ppf.jpg',
	},
	{
		id: 'vinyl',
		category: 'vinyl',
		title: '–í–∏–Ω–∏–ª–æ–≤–∞—è –æ–∫–ª–µ–π–∫–∞',
		icon: 'üé®',
		price: '–æ—Ç 35 000 ‚ÇΩ',
		description: '–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –±–µ–∑ –ø–µ—Ä–µ–∫—Ä–∞—Å–∫–∏',
		features: ['100+ —Ü–≤–µ—Ç–æ–≤', '–ú–∞—Ç–æ–≤—ã–π/–≥–ª—è–Ω–µ—Ü', '–ó–∞—â–∏—Ç–∞ –õ–ö–ü', '–°—ä–µ–º–Ω–∞—è'],
		image: '/images/services/vinyl.jpg',
	},
	{
		id: 'tint',
		category: 'tint',
		title: '–¢–æ–Ω–∏—Ä–æ–≤–∫–∞ —Å—Ç–µ–∫–æ–ª',
		icon: 'üï∂Ô∏è',
		price: '–æ—Ç 8 000 ‚ÇΩ',
		description: '–ê—Ç–µ—Ä–º–∞–ª—å–Ω–∞—è —Ç–æ–Ω–∏—Ä–æ–≤–∫–∞ —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç —É–ª—å—Ç—Ä–∞—Ñ–∏–æ–ª–µ—Ç–∞',
		features: ['–ê—Ç–µ—Ä–º–∞–ª—å–Ω–∞—è', 'UV-–∑–∞—â–∏—Ç–∞', '–ù–µ –≤—ã–≥–æ—Ä–∞–µ—Ç', '–ü–æ –ì–û–°–¢—É'],
		image: '/images/services/tint.jpg',
	},
	{
		id: 'polish',
		category: 'polish',
		title: '–ü–æ–ª–∏—Ä–æ–≤–∫–∞ –∫—É–∑–æ–≤–∞',
		icon: '‚ú®',
		price: '–æ—Ç 15 000 ‚ÇΩ',
		description: '–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–ª–µ—Å–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ü–∞—Ä–∞–ø–∏–Ω',
		features: [
			'–£–¥–∞–ª–µ–Ω–∏–µ —Ü–∞—Ä–∞–ø–∏–Ω',
			'–ó–µ—Ä–∫–∞–ª—å–Ω—ã–π –±–ª–µ—Å–∫',
			'3-—ç—Ç–∞–ø–Ω–∞—è',
			'–î–µ—Ç–µ–π–ª–∏–Ω–≥',
		],
		image: '/images/services/polish.jpg',
	},
	{
		id: 'ceramic',
		category: 'ceramic',
		title: '–ö–µ—Ä–∞–º–∏—á–µ—Å–∫–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ',
		icon: 'üíé',
		price: '–æ—Ç 25 000 ‚ÇΩ',
		description: '–î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞—â–∏—Ç–∞ —Å –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã–º –±–ª–µ—Å–∫–æ–º',
		features: ['9H —Ç–≤–µ—Ä–¥–æ—Å—Ç—å', '–ì–∏–¥—Ä–æ—Ñ–æ–±', '–î–æ 3 –ª–µ—Ç', 'Ceramic Pro'],
		image: '/images/services/ceramic.jpg',
	},
	{
		id: 'interior',
		category: 'polish',
		title: '–•–∏–º—á–∏—Å—Ç–∫–∞ —Å–∞–ª–æ–Ω–∞',
		icon: 'üßΩ',
		price: '–æ—Ç 12 000 ‚ÇΩ',
		description: '–ì–ª—É–±–æ–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∞–ª–æ–Ω–∞',
		features: [
			'–ü–∞—Ä–æ–≤–∞—è —á–∏—Å—Ç–∫–∞',
			'–ö–æ–∂–∞/—Ç–∫–∞–Ω—å',
			'–û–∑–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ',
			'–ê–Ω—Ç–∏–±–∞–∫—Ç–µ—Ä–∏–∞–ª—å–Ω–∞—è',
		],
		image: '/images/services/interior.jpg',
	},
]

const filteredServices = computed(() => {
	if (activeFilter.value === 'all') return services
	return services.filter(s => s.category === activeFilter.value)
})

onMounted(async () => {
	if (process.client) {
		const gsap = (await import('gsap')).default
		const ScrollTrigger = (await import('gsap/ScrollTrigger')).default
		gsap.registerPlugin(ScrollTrigger)

		gsap.fromTo(
			'.services__card',
			{ y: 60, opacity: 0 },
			{
				y: 0,
				opacity: 1,
				duration: 0.6,
				stagger: 0.1,
				ease: 'power2.out',
				scrollTrigger: {
					trigger: '.services__grid',
					start: 'top 80%',
				},
			}
		)
	}
})
</script>

<template>
	<section id="services" class="services section">
		<div class="container">
			<!-- Header -->
			<div class="section-header">
				<h2 class="section-title">–ù–ê–®–ò <span class="accent">–£–°–õ–£–ì–ò</span></h2>
				<p class="section-subtitle">
					–ü—Ä–µ–º–∏–∞–ª—å–Ω—ã–π –¥–µ—Ç–µ–π–ª–∏–Ω–≥ –¥–ª—è –≤–∞—à–µ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ª—É—á—à–∏—Ö
					–º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
				</p>
			</div>

			<!-- Filters -->
			<div class="services__filters">
				<button
					v-for="filter in filters"
					:key="filter.id"
					class="services__filter"
					:class="{ 'services__filter--active': activeFilter === filter.id }"
					@click="activeFilter = filter.id"
				>
					{{ filter.label }}
				</button>
			</div>

			<!-- Services Grid -->
			<div class="services__grid">
				<article
					v-for="service in filteredServices"
					:key="service.id"
					class="services__card"
				>
					<div class="services__card-inner">
						<!-- Front -->
						<div class="services__card-front">
							<div class="services__card-image">
								<div class="services__card-placeholder">
									<span class="services__card-icon">{{ service.icon }}</span>
								</div>
							</div>
							<div class="services__card-content">
								<span class="services__card-icon-small">{{
									service.icon
								}}</span>
								<h3 class="services__card-title">{{ service.title }}</h3>
								<p class="services__card-price">{{ service.price }}</p>
							</div>
						</div>

						<!-- Back -->
						<div class="services__card-back">
							<h3 class="services__card-title">{{ service.title }}</h3>
							<p class="services__card-desc">{{ service.description }}</p>
							<ul class="services__card-features">
								<li v-for="feature in service.features" :key="feature">
									<svg
										width="16"
										height="16"
										viewBox="0 0 24 24"
										fill="none"
										stroke="currentColor"
										stroke-width="2"
									>
										<polyline points="20 6 9 17 4 12"></polyline>
									</svg>
									{{ feature }}
								</li>
							</ul>
							<a href="#calculator" class="btn btn-neon btn-sm">
								<span>–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</span>
							</a>
						</div>
					</div>
				</article>
			</div>

			<!-- Laser Divider -->
			<div class="laser-divider mt-5"></div>
		</div>
	</section>
</template>

<style lang="scss" scoped>
.services {
	background: $deep-space;

	&__filters {
		display: flex;
		justify-content: center;
		gap: $space-sm;
		margin-bottom: $space-2xl;
		flex-wrap: wrap;
	}

	&__filter {
		padding: $space-sm $space-md;
		font-family: $font-body;
		font-size: 14px;
		font-weight: 500;
		color: $platinum-muted;
		background: transparent;
		border: 1px solid rgba($electric-blue, 0.2);
		border-radius: $border-radius-full;
		cursor: pointer;
		transition: all $transition-fast ease;

		&:hover {
			border-color: $electric-blue;
			color: $platinum-white;
		}

		&--active {
			background: $electric-blue;
			border-color: $electric-blue;
			color: $deep-space;
			@include neon-text;
			text-shadow: none;
			box-shadow: 0 0 20px rgba($electric-blue, 0.4);
		}
	}

	&__grid {
		display: grid;
		grid-template-columns: repeat(3, 1fr);
		gap: $space-lg;

		@include respond-below('lg') {
			grid-template-columns: repeat(2, 1fr);
		}

		@include respond-below('sm') {
			grid-template-columns: 1fr;
		}
	}

	&__card {
		perspective: 1000px;
		height: 380px;

		&-inner {
			position: relative;
			width: 100%;
			height: 100%;
			transition: transform 0.6s $ease-smooth;
			transform-style: preserve-3d;
		}

		&:hover &-inner {
			transform: rotateY(180deg);
		}

		&-front,
		&-back {
			position: absolute;
			width: 100%;
			height: 100%;
			backface-visibility: hidden;
			border-radius: $border-radius-lg;
			overflow: hidden;
		}

		&-front {
			@include card-base;
			padding: 0;
			display: flex;
			flex-direction: column;
		}

		&-back {
			@include card-base;
			background: linear-gradient(
				145deg,
				rgba($electric-blue, 0.15) 0%,
				rgba($deep-space, 0.95) 100%
			);
			transform: rotateY(180deg);
			display: flex;
			flex-direction: column;
			justify-content: center;
			padding: $space-lg;
		}

		&-image {
			height: 200px;
			background: $gradient-card;
			position: relative;
			overflow: hidden;
		}

		&-placeholder {
			@include flex-center;
			height: 100%;
			font-size: 64px;
			opacity: 0.3;
		}

		&-content {
			padding: $space-md;
			display: flex;
			flex-direction: column;
			gap: $space-xs;
		}

		&-icon {
			font-size: 48px;
		}

		&-icon-small {
			font-size: 24px;
		}

		&-title {
			font-family: $font-body;
			font-size: 18px;
			font-weight: 600;
			color: $platinum-white;
		}

		&-price {
			font-family: $font-tech;
			font-size: 16px;
			color: $electric-blue;
		}

		&-desc {
			font-size: 14px;
			color: $platinum-muted;
			margin: $space-sm 0;
		}

		&-features {
			list-style: none;
			margin: $space-md 0;

			li {
				display: flex;
				align-items: center;
				gap: $space-xs;
				font-size: 14px;
				color: $platinum-muted;
				margin-bottom: $space-xs;

				svg {
					color: $electric-blue;
					flex-shrink: 0;
				}
			}
		}
	}
}
</style>
