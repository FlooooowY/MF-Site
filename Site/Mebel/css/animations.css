/* ============================================
   ДРЕВО МАСТЕРОВ - Animation Styles
   Cinematographic Effects & Micro-interactions
   ============================================ */

/* ============================================
   Wood Grain Animation
   ============================================ */

@keyframes woodGrainFlow {
	0% {
		background-position: 0 0, 0 0, 0 0;
	}
	100% {
		background-position: 100px 0, 0 100px, 200px 200px;
	}
}

.wood-grain-bg {
	animation: woodGrainFlow 60s linear infinite;
}

/* Animated wood texture on scroll */
.wood-texture-animated {
	position: relative;
	overflow: hidden;
}

.wood-texture-animated::before {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	width: 200%;
	height: 100%;
	background: repeating-linear-gradient(
		95deg,
		transparent 0px,
		transparent 2px,
		rgba(139, 69, 19, 0.03) 2px,
		rgba(139, 69, 19, 0.03) 4px
	);
	animation: textureShift 30s linear infinite;
	pointer-events: none;
}

@keyframes textureShift {
	0% {
		transform: translateX(0);
	}
	100% {
		transform: translateX(-50%);
	}
}

/* ============================================
   Sawdust Particle Effects
   ============================================ */

.sawdust {
	position: absolute;
	pointer-events: none;
}

.sawdust-small {
	width: 3px;
	height: 3px;
	background: var(--wood-light);
	border-radius: 50%;
}

.sawdust-medium {
	width: 5px;
	height: 2px;
	background: linear-gradient(90deg, var(--wood-light), var(--wood-medium));
	border-radius: 2px;
	transform: rotate(var(--rotation, 0deg));
}

.sawdust-large {
	width: 8px;
	height: 3px;
	background: linear-gradient(90deg, var(--wood-medium), var(--wood-dark));
	border-radius: 3px;
	transform: rotate(var(--rotation, 0deg));
}

@keyframes sawdustFallSlow {
	0% {
		opacity: 0.9;
		transform: translateY(0) rotate(0deg) translateX(0);
	}
	25% {
		transform: translateY(25vh) rotate(180deg) translateX(30px);
	}
	50% {
		transform: translateY(50vh) rotate(360deg) translateX(-20px);
	}
	75% {
		transform: translateY(75vh) rotate(540deg) translateX(15px);
	}
	100% {
		opacity: 0;
		transform: translateY(100vh) rotate(720deg) translateX(-10px);
	}
}

@keyframes sawdustFallFast {
	0% {
		opacity: 0.8;
		transform: translateY(0) rotate(0deg);
	}
	100% {
		opacity: 0;
		transform: translateY(100vh) rotate(540deg);
	}
}

@keyframes sawdustSpiral {
	0% {
		opacity: 0.7;
		transform: translateY(0) rotate(0deg) translateX(0);
	}
	100% {
		opacity: 0;
		transform: translateY(80vh) rotate(1080deg)
			translateX(calc(var(--drift, 50px)));
	}
}

/* ============================================
   Button Animations
   ============================================ */

/* Chisel carving effect */
.btn-chisel {
	position: relative;
	overflow: visible;
}

.btn-chisel::after {
	content: '';
	position: absolute;
	top: -4px;
	left: -4px;
	right: -4px;
	bottom: -4px;
	border: 2px solid var(--wood-light);
	border-radius: calc(var(--radius-md) + 4px);
	opacity: 0;
	transform: scale(1.1);
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.btn-chisel:hover::after {
	opacity: 1;
	transform: scale(1);
	border-width: 3px 5px 5px 3px;
}

/* Wood frame border animation */
@keyframes woodFramePulse {
	0%,
	100% {
		border-width: 2px 4px 4px 2px;
	}
	50% {
		border-width: 4px 2px 2px 4px;
	}
}

.btn-wood-frame:hover {
	animation: woodFramePulse 1s ease-in-out infinite;
}

/* Ripple effect */
.btn-ripple {
	position: relative;
	overflow: hidden;
}

.btn-ripple::before {
	content: '';
	position: absolute;
	top: 50%;
	left: 50%;
	width: 0;
	height: 0;
	background: rgba(255, 255, 255, 0.3);
	border-radius: 50%;
	transform: translate(-50%, -50%);
	transition: width 0.6s ease, height 0.6s ease;
}

.btn-ripple:active::before {
	width: 300px;
	height: 300px;
}

/* ============================================
   Scroll-triggered Animations
   ============================================ */

/* Fade in up */
.animate-fade-up {
	opacity: 0;
	transform: translateY(40px);
	transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1),
		transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-fade-up.visible {
	opacity: 1;
	transform: translateY(0);
}

/* Fade in from left */
.animate-fade-left {
	opacity: 0;
	transform: translateX(-60px);
	transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1),
		transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-fade-left.visible {
	opacity: 1;
	transform: translateX(0);
}

/* Fade in from right */
.animate-fade-right {
	opacity: 0;
	transform: translateX(60px);
	transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1),
		transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-fade-right.visible {
	opacity: 1;
	transform: translateX(0);
}

/* Scale in */
.animate-scale {
	opacity: 0;
	transform: scale(0.9);
	transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1),
		transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-scale.visible {
	opacity: 1;
	transform: scale(1);
}

/* Stagger children */
.stagger-children > * {
	opacity: 0;
	transform: translateY(30px);
	transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1),
		transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

.stagger-children.visible > *:nth-child(1) {
	transition-delay: 0ms;
}
.stagger-children.visible > *:nth-child(2) {
	transition-delay: 100ms;
}
.stagger-children.visible > *:nth-child(3) {
	transition-delay: 200ms;
}
.stagger-children.visible > *:nth-child(4) {
	transition-delay: 300ms;
}
.stagger-children.visible > *:nth-child(5) {
	transition-delay: 400ms;
}
.stagger-children.visible > *:nth-child(6) {
	transition-delay: 500ms;
}
.stagger-children.visible > *:nth-child(7) {
	transition-delay: 600ms;
}
.stagger-children.visible > *:nth-child(8) {
	transition-delay: 700ms;
}

.stagger-children.visible > * {
	opacity: 1;
	transform: translateY(0);
}

/* ============================================
   Tool Divider Animations
   ============================================ */

.tool-divider {
	overflow: visible;
}

.tool-divider path,
.tool-divider rect {
	transform-origin: center;
	transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.tool-divider.animate path {
	animation: toolChisel 2s ease-in-out infinite;
}

.tool-divider.animate rect {
	animation: toolHandle 2s ease-in-out infinite;
}

@keyframes toolChisel {
	0%,
	100% {
		transform: translateX(0);
	}
	25% {
		transform: translateX(5px);
	}
	75% {
		transform: translateX(-5px);
	}
}

@keyframes toolHandle {
	0%,
	100% {
		transform: rotate(0deg);
	}
	25% {
		transform: rotate(2deg);
	}
	75% {
		transform: rotate(-2deg);
	}
}

/* ============================================
   Gallery Hover Effects
   ============================================ */

/* Before/After transition */
.gallery-item-inner {
	perspective: 1000px;
}

.gallery-item-front,
.gallery-item-back {
	backface-visibility: hidden;
}

.gallery-item:hover .gallery-item-front {
	opacity: 0;
	transform: scale(1.05);
}

.gallery-item:hover .gallery-item-back {
	opacity: 1;
	transform: scale(1);
}

/* Depth effect on hover */
.gallery-item::before {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background: linear-gradient(
		135deg,
		rgba(139, 69, 19, 0.1) 0%,
		transparent 50%,
		rgba(0, 0, 0, 0.1) 100%
	);
	opacity: 0;
	transition: opacity 0.4s ease;
	pointer-events: none;
	z-index: 10;
	border-radius: var(--radius-lg);
}

.gallery-item:hover::before {
	opacity: 1;
}

/* ============================================
   Material Card Animations
   ============================================ */

.material-card {
	position: relative;
}

.material-card::before {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background: linear-gradient(
		45deg,
		transparent 40%,
		rgba(255, 255, 255, 0.1) 50%,
		transparent 60%
	);
	transform: translateX(-100%);
	transition: transform 0.6s ease;
	pointer-events: none;
}

.material-card:hover::before {
	transform: translateX(100%);
}

/* Grain texture animation */
.material-grain {
	animation: grainShimmer 8s linear infinite;
}

@keyframes grainShimmer {
	0% {
		opacity: 0.5;
	}
	50% {
		opacity: 0.7;
	}
	100% {
		opacity: 0.5;
	}
}

/* Material bar fill animation */
.material-bar span {
	transform-origin: left;
	transform: scaleX(0);
	transition: transform 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.material-card.visible .material-bar span,
.material-card:hover .material-bar span {
	transform: scaleX(1);
}

/* ============================================
   Constructor Animations
   ============================================ */

/* Assembly animation */
@keyframes assemblySlide {
	0% {
		opacity: 0;
		transform: translateY(-30px) rotateX(-20deg);
	}
	100% {
		opacity: 1;
		transform: translateY(0) rotateX(0);
	}
}

.constructor-3d.assembling .furniture-part {
	animation: assemblySlide 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.constructor-3d.assembling .furniture-part:nth-child(1) {
	animation-delay: 0ms;
}
.constructor-3d.assembling .furniture-part:nth-child(2) {
	animation-delay: 200ms;
}
.constructor-3d.assembling .furniture-part:nth-child(3) {
	animation-delay: 400ms;
}
.constructor-3d.assembling .furniture-part:nth-child(4) {
	animation-delay: 600ms;
}
.constructor-3d.assembling .furniture-part:nth-child(5) {
	animation-delay: 800ms;
}

/* Material texture change */
@keyframes textureTransition {
	0% {
		opacity: 1;
	}
	50% {
		opacity: 0;
	}
	100% {
		opacity: 1;
	}
}

.constructor-3d.changing-material {
	animation: textureTransition 0.5s ease;
}

/* Price counter animation */
@keyframes priceUpdate {
	0% {
		transform: scale(1);
		color: var(--white);
	}
	50% {
		transform: scale(1.1);
		color: var(--emerald-light);
	}
	100% {
		transform: scale(1);
		color: var(--white);
	}
}

.price-value.updating {
	animation: priceUpdate 0.4s ease;
}

/* Dimension slider thumb pulse */
@keyframes sliderPulse {
	0%,
	100% {
		box-shadow: 0 0 0 0 rgba(46, 139, 87, 0.4);
	}
	50% {
		box-shadow: 0 0 0 8px rgba(46, 139, 87, 0);
	}
}

.dimension-control input[type='range']:active::-webkit-slider-thumb {
	animation: sliderPulse 1s ease infinite;
}

/* ============================================
   Reviews Slider Animations
   ============================================ */

.reviews-track {
	transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.review-card {
	opacity: 0.4;
	transform: scale(0.95);
	transition: opacity 0.5s ease, transform 0.5s ease;
}

.review-card.active {
	opacity: 1;
	transform: scale(1);
}

/* Rating stars animation */
@keyframes starPop {
	0% {
		transform: scale(0);
		opacity: 0;
	}
	50% {
		transform: scale(1.2);
	}
	100% {
		transform: scale(1);
		opacity: 1;
	}
}

.review-rating span {
	display: inline-block;
	animation: starPop 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* ============================================
   Form Animations
   ============================================ */

/* Input focus effect */
.form-group input:focus,
.form-group textarea:focus,
.form-group select:focus {
	animation: inputFocus 0.3s ease;
}

@keyframes inputFocus {
	0% {
		box-shadow: 0 0 0 0 rgba(139, 69, 19, 0.2);
	}
	100% {
		box-shadow: 0 0 0 4px rgba(139, 69, 19, 0.1);
	}
}

/* Upload area pulse */
.upload-area.dragover {
	animation: uploadPulse 1s ease infinite;
}

@keyframes uploadPulse {
	0%,
	100% {
		border-color: var(--wood-dark);
		background: rgba(139, 69, 19, 0.02);
	}
	50% {
		border-color: var(--emerald);
		background: rgba(46, 139, 87, 0.05);
	}
}

/* Submit button loading */
.btn.loading {
	pointer-events: none;
}

.btn.loading .spinner circle {
	animation: spinnerDash 1.5s ease-in-out infinite;
}

@keyframes spinnerDash {
	0% {
		stroke-dasharray: 1, 150;
		stroke-dashoffset: 0;
	}
	50% {
		stroke-dasharray: 90, 150;
		stroke-dashoffset: -35;
	}
	100% {
		stroke-dasharray: 90, 150;
		stroke-dashoffset: -124;
	}
}

/* ============================================
   Hero Section Animations
   ============================================ */

/* Title reveal */
.hero-title-line {
	overflow: hidden;
}

.hero-title-line span {
	display: inline-block;
	transform: translateY(100%);
	animation: titleReveal 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.hero-title-line:nth-child(1) span {
	animation-delay: 0.2s;
}
.hero-title-line:nth-child(2) span {
	animation-delay: 0.4s;
}
.hero-title-line:nth-child(3) span {
	animation-delay: 0.6s;
}

@keyframes titleReveal {
	to {
		transform: translateY(0);
	}
}

/* Badge entrance */
.hero-badge {
	animation: badgeSlide 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.1s forwards;
	opacity: 0;
	transform: translateY(-20px);
}

@keyframes badgeSlide {
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

/* Stats counter */
.hero-stat-number {
	display: inline-block;
}

@keyframes countUp {
	from {
		opacity: 0;
		transform: translateY(20px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

/* ============================================
   Header Animations
   ============================================ */

.header {
	transition: background 0.4s ease, box-shadow 0.4s ease, transform 0.4s ease;
}

.header.hidden {
	transform: translateY(-100%);
}

/* Nav link underline */
.nav-link::after {
	transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Logo hover */
.logo-icon svg {
	transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.logo:hover .logo-icon svg {
	transform: rotate(10deg) scale(1.1);
}

/* ============================================
   Modal Animations
   ============================================ */

.modal {
	transition: opacity 0.3s ease, visibility 0.3s ease;
}

.modal-content {
	transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
}

.modal.active .modal-content {
	animation: modalBounce 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes modalBounce {
	0% {
		transform: scale(0.9) translateY(30px);
		opacity: 0;
	}
	50% {
		transform: scale(1.02) translateY(-5px);
	}
	100% {
		transform: scale(1) translateY(0);
		opacity: 1;
	}
}

/* Success icon animation */
.success-icon svg {
	stroke-dasharray: 100;
	stroke-dashoffset: 100;
	animation: checkDraw 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.3s forwards;
}

@keyframes checkDraw {
	to {
		stroke-dashoffset: 0;
	}
}

.success-icon {
	animation: successPop 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes successPop {
	0% {
		transform: scale(0);
	}
	50% {
		transform: scale(1.1);
	}
	100% {
		transform: scale(1);
	}
}

/* ============================================
   Preloader Animations
   ============================================ */

.preloader {
	transition: opacity 0.8s cubic-bezier(0.4, 0, 0.2, 1),
		visibility 0.8s cubic-bezier(0.4, 0, 0.2, 1);
}

.preloader.hidden {
	opacity: 0;
	visibility: hidden;
}

.preloader.hidden .preloader-content {
	transform: scale(0.9);
	opacity: 0;
}

.preloader-content {
	transition: transform 0.5s ease, opacity 0.5s ease;
}

/* Tree icon pulse */
.tree-icon {
	animation: treePulse 2s ease-in-out infinite;
}

@keyframes treePulse {
	0%,
	100% {
		transform: scale(1);
		filter: drop-shadow(0 0 0 transparent);
	}
	50% {
		transform: scale(1.05);
		filter: drop-shadow(0 0 20px rgba(139, 69, 19, 0.3));
	}
}

/* Progress bar */
.preloader-progress {
	animation: progressFill 2s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes progressFill {
	0% {
		width: 0;
	}
	100% {
		width: 100%;
	}
}

/* ============================================
   Parallax Effects
   ============================================ */

.parallax-slow {
	will-change: transform;
	transition: transform 0.1s linear;
}

.parallax-medium {
	will-change: transform;
	transition: transform 0.05s linear;
}

.parallax-fast {
	will-change: transform;
	transition: transform 0.02s linear;
}

/* ============================================
   Cursor Effects
   ============================================ */

.custom-cursor {
	position: fixed;
	width: 20px;
	height: 20px;
	border: 2px solid var(--wood-dark);
	border-radius: 50%;
	pointer-events: none;
	z-index: 9999;
	transition: transform 0.15s ease, width 0.2s ease, height 0.2s ease,
		background 0.2s ease;
	transform: translate(-50%, -50%);
}

.custom-cursor.hover {
	width: 40px;
	height: 40px;
	background: rgba(139, 69, 19, 0.1);
}

.custom-cursor.click {
	transform: translate(-50%, -50%) scale(0.8);
}

/* ============================================
   Sound Indicator (for sound effects)
   ============================================ */

.sound-indicator {
	position: fixed;
	bottom: 20px;
	right: 20px;
	width: 40px;
	height: 40px;
	background: var(--white);
	border-radius: 50%;
	display: flex;
	align-items: center;
	justify-content: center;
	box-shadow: var(--shadow-md);
	cursor: pointer;
	z-index: 100;
	transition: transform 0.2s ease;
}

.sound-indicator:hover {
	transform: scale(1.1);
}

.sound-bars {
	display: flex;
	align-items: flex-end;
	gap: 2px;
	height: 16px;
}

.sound-bar {
	width: 3px;
	background: var(--wood-dark);
	border-radius: 2px;
	animation: soundWave 0.8s ease-in-out infinite;
}

.sound-bar:nth-child(1) {
	height: 8px;
	animation-delay: 0ms;
}
.sound-bar:nth-child(2) {
	height: 16px;
	animation-delay: 150ms;
}
.sound-bar:nth-child(3) {
	height: 12px;
	animation-delay: 300ms;
}

.sound-indicator.muted .sound-bar {
	animation: none;
	height: 4px;
}

@keyframes soundWave {
	0%,
	100% {
		transform: scaleY(1);
	}
	50% {
		transform: scaleY(0.5);
	}
}

/* ============================================
   Seasonal Theme Transitions
   ============================================ */

body.season-spring {
	--wood-light: #c9d99e;
	--linen: #f0f5e2;
}

body.season-summer {
	--wood-light: #d4a574;
	--linen: #fff8e7;
}

body.season-autumn {
	--wood-light: #cc7722;
	--linen: #fdf0d5;
}

body.season-winter {
	--wood-light: #b5c4c8;
	--linen: #f5f7f8;
}

/* Smooth season transition */
body {
	transition: --wood-light 1s ease, --linen 1s ease;
}

/* ============================================
   Performance Optimizations
   ============================================ */

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}

	.sawdust,
	.parallax-slow,
	.parallax-medium,
	.parallax-fast {
		animation: none !important;
		transform: none !important;
	}
}

/* Hardware acceleration for animations */
.animate-fade-up,
.animate-fade-left,
.animate-fade-right,
.animate-scale,
.gallery-item,
.material-card,
.review-card {
	will-change: transform, opacity;
}

/* Disable animations on low-power mode */
@media (prefers-reduced-motion: reduce) {
	.wood-grain-bg {
		animation: none;
	}
}
